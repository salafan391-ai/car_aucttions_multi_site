{% extends "base.html" %}

{% block title %}رسالة جديدة - {{ site_name|default:"سيارات" }}{% endblock %}

{% block content %}
<section class="max-w-2xl mx-auto px-4 py-8">
    <nav class="flex items-center gap-2 text-sm text-gray-500 mb-6">
        <a href="{% url 'inbox' %}" class="text-brand-hover transition">الرسائل</a>
        <span>/</span>
        <span class="text-gray-800">رسالة جديدة</span>
    </nav>

    <div class="bg-white rounded-2xl shadow-sm p-6">
        <h1 class="text-xl font-bold mb-6">إرسال رسالة جديدة</h1>
        <form method="post">
            {% csrf_token %}
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">إلى</label>
                <select name="recipient" required class="w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 ring-brand outline-none">
                    <option value="">اختر المستلم...</option>
                    {% for u in users %}
                    <option value="{{ u.pk }}">{{ u.username }}{% if u.get_full_name %} ({{ u.get_full_name }}){% endif %}{% if u.is_staff %} - إدارة{% endif %}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">الموضوع</label>
                <input type="text" name="subject" required class="w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 ring-brand outline-none" placeholder="موضوع الرسالة...">
            </div>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-1">الرسالة</label>
                <textarea name="body" rows="6" required class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-brand/20 focus:border-brand outline-none transition resize-none" placeholder="اكتب رسالتك هنا..."></textarea>
            </div>
            <div class="flex justify-end gap-3">
                <a href="{% url 'inbox' %}" class="px-5 py-2.5 border border-gray-200 text-gray-500 font-medium rounded-xl text-sm hover:bg-gray-50 transition">إلغاء</a>
                <button type="submit" class="bg-brand bg-brand-hover text-white text-sm font-bold px-6 py-2.5 rounded-xl transition">
                    إرسال
                </button>
            </div>
        </form>
    </div>
</section>
{% endblock %}
